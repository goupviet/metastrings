<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>metastrings v2 - a NoSQL database</title>
    <style>
        body  {
            font-family: Verdana, sans-serif;
            margin: 0;
			overflow: scroll;
        }

        pre {
            font-family: 'Courier New', monospace;
        }

        #pageHeader {
            font-size: large;
            font-weight: bold;
            padding-top: 1em;
        }

        #navbar {
            background-color: lightblue;
            width: 20em;
            height: 100%;
            margin: 0;
            position: fixed;
            overflow: auto;
        }

        #contentsHeader {
            font-size: large;
        }

        .contentGroupHeader {
            margin-left: 10px;
            font-weight: bold;
        }

        #contentDiv {
            margin-left: 20em;
            padding-left: 1em;
        }
		
		#projectVersion {
			margin-left: 1em;
		}

        .topic {
            font-weight: bolder;
            font-size: larger;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
</head>
<body>
    <div id=navbar>
		<div class=contentGroupHeader>metastrings v2</div>
        <ul>
            <li><a href="#whatis">What is metastrings?</a></li>
            <li><a href="#why">Why metastrings?</a></li>
            <li><a href="#installation">Installation</a></li>
        </ul>
		
        <div class=contentGroupHeader>Contact</div>
        <ul>
			<li><a href="mailto: contact@metastrings.io">contact@metastrings.io</a></li>
		</ul>

        <div class=contentGroupHeader>Libraries</div>
        <ul>
            <li>
                <a href="#lib-types">Implementation classes</a>
                <ol>
                    <li><a href="#Tables">Tables</a></li>
                    <li><a href="#Items">Items</a></li>
                    <li><a href="#Names">Names</a></li>
                    <li><a href="#Values">Values</a></li>
                    <li><a href="#NameValues">NameValues</a></li>
                    <li><a href="#LongStrings">LongStrings</a></li>
                    <li><a href="#Schema">Schema Diagram</a></li>
                </ol>
            </li>
            <li>
                <a href="#utils">utils</a>
                <ol>
                    <li><a href="#ListDictionary">ListDictionary</a></li>
                    <li><a href="#ScopeTiming">ScopeTiming</a></li>
                    <li><a href="#Types">Types</a></li>
                    <li><a href="#Utils">Utils</a></li>
                    <li><a href="#Metaq">metaq</a></li>
                </ol>
            </li>
        </ul>
    </div>

    <div id=contentDiv>
        <div id=pageHeader>metastrings - a NoSQL database</div>
        <h1><a name=whatis>What is metastrings?</a></h1>
        <b>metastrings</b> is a NoSQL database built on top of MySQL or SQLite.  
		It consists of a .NET class library that you program against, and either a MySQL schema, or a SQLite file.
		
        <h1><a name=why>Why metastrings?</a></h1>
        <ol>
            <li>Ease of use</li>
            <li>High productivity</li>
            <li>Dynamic schema</li>
            <li>Automatic indexing</li>
		</ol>
		
        <h2><a name="installation">Installation</a></h2>
		<ul>
			<li>Get the source from <a target=_blank href="https://github.com/michaelsballoni/metastrings2">GitHub</a>.
			<li>Build the source using Microsoft Visual Studio 2019 or newer.
			
			<li><h3>If using SQLite...</h3>
			<li>Create a DB connection string like this:
			<br>
			<pre>&lt;add name="metastrings" connectionString="Data Source=[UserRoaming]metastrings.db" /&gt;</pre>
			
			<li><h3>If using MySQL...</h3>
			<li>Provision a new MySQL database schema, call it "metastrings".
			<li>Create the metastring schema using the "metastrings - schema.sql" file in the source repository under "schema"
			<li>Create a DB connection string like this:
			<br>
			<pre>&lt;add name="metastrings" connectionString="Server=localhost; Database=metastrings; Uid=michael; Pwd=balloni;"/&gt;</pre>
			
			<li><h3>Integrate the metastrings project into your solution...</h3>
			<li>Add a reference to metastring's mslib project
			<li>Put the connection string in your application project configuration file.
			
			<li><h3>To start using metastrings in your code...</h3>
			<li>metastrings uses the "metastrings" namespace
			<li>Use the Define class for UPSERTs
			<li>Use the Sql class for SELECTs
			<li>Use the Command's class's member functions for all other functionality, such as DELETEs and DROPs
		</ul>
		
		
        <h3><a name=lib-types>Implementation types</a></h3>
        These classes implement the core NoSQL functionality
        <ul>
            <li><a class=topic name=Tables>Tables</a> - the schema and primary key definition</li>
            <li><a class=topic name=Items>Items</a> - the rows of the database</li>
            <li><a class=topic name=Names>Names</a> - the columns of the database</li>
            <li><a class=topic name=Values>Values</a> - the row data</li>
            <li><a class=topic name=NameValues>NameValues</a> - get name-values literals from ids</li>
            <li><a class=topic name=LongStrings>LongStrings</a> - support for long text strings</li>
			<li><a class=topic name=Schema>Schema Diagram</a><br><img src="diagram2.png"></li>
        </ul>

        <h3><a name=utils>utils</a></h3>
        Core classes for implementing the project
        <ul>
            <li>
                <a class=topic name=ListDictionary>ListDictionary</a>
                <br>
                A List/Dictionary hybrid, used to keep the order of KeyValue Adds as the order of KeyValue iteration
				<br>
				You get the fast lookups of a Dictionary, and the item ordering of List.
                <br>
                This is needed for maintaining the order of results of ExecDictAsync
            </li>
            <li>
                <a class=topic name=ScopeTiming>ScopeTiming</a>
                -
                Lightweight timing framework for establishing performance profiles
            </li>
            <li>
                <a class=topic name=Types>Types</a>
                -
                Central location for the little types used throughout the codebase,
                like MetaStringException
            </li>
			
            <li>
                <a class=topic name=Utils>Utils</a> - Low-level static class for getting things done
                <ol>
                    <li>HashString - SHA-256</li>
                    <li>Serialize / Deserialize - JSON wrappers</li>
                    <li>BatchUp - turn a bunch of individual SQL statements into batches of SQL of the same size</li>
                    <li>SplitItUp - turn a list of items into a number of lists of items</li>
                    <li>HandleException - robust WebException error handling</li>
                    <li>ConvertDbInt... - DB null-handling number getting</li>
                    <li>CleanName - make a unique column valid name for SQL building</li>
                    <li>
                        IsWord / IsParam / IsNameReserved / Validate...
                        <br>
                        validation of tokens to keep columns, parameters, and operations SQL clean
                    </li>
                </ol>
            </li>
        </ul>

        <a name=Metaq><h3>metaq</h3></a>
        metaq is a powerful tool for accessing the database and troubleshooting queries.
        You enter your SQL query, then the value for each parameter in the query,
        and it writes your query, then the MySQL query generated by metastrings to metaq.log
        in the current directory.
        It also writes the query results to that file, so you get a complete query-to-results snapshot.
        <pre>
> select id, title from beats where title like @title

@title: Fresh%

id: 734348
title: Fresh One
===
Results: 1

></pre>
    </div>
</body>
</html>
